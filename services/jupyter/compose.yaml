services:
  jupyter:
    build:
      context: ./services/jupyter
    profiles: ["jupyter"]
    ports:
      - "${JUPYTER_PORT:-8888}:8888"
    volumes:
      - ./shared/notebooks:/home/jovyan/work/notebooks
      - ./shared/dags:/home/jovyan/work/dags
      - ./shared/data:/home/jovyan/work/data
      - ./shared/evidence:/home/jovyan/work/evidence
    environment:
      TZ: ${TIMEZONE:-America/New_York}
      JUPYTER_ENABLE_LAB: "yes"
      JUPYTER_TOKEN: ${JUPYTER_TOKEN:-ecosystem}
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:8888/api || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 5
    networks:
      - ecosystem
