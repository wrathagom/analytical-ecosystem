services:
  sqlpad:
    image: ${SQLPAD_IMAGE:-sqlpad/sqlpad:latest}
    profiles: ["sqlpad"]
    ports:
      - "${SQLPAD_PORT:-3002}:3000"
    volumes:
      - ./shared/data:/data
    environment:
      TZ: ${TIMEZONE:-America/New_York}
      SQLPAD_ADMIN: ${SQLPAD_ADMIN:-admin}
      SQLPAD_ADMIN_PASSWORD: ${SQLPAD_ADMIN_PASSWORD:-ecosystem}
      SQLPAD_APP_LOG_LEVEL: ${SQLPAD_APP_LOG_LEVEL:-info}
    healthcheck:
      test:
        [
          "CMD",
          "node",
          "-e",
          "require('http').get('http://localhost:3000/', r=>process.exit(r.statusCode<400?0:1)).on('error',()=>process.exit(1))"
        ]
      start_period: 30s
      interval: 30s
      timeout: 10s
      retries: 5
    networks:
      - ecosystem
