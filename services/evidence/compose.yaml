services:
  evidence:
    image: evidencedev/devenv:latest
    profiles: ["evidence"]
    ports:
      - "${EVIDENCE_PORT:-3000}:3000"
    volumes:
      - ./shared/evidence:/evidence-workspace
      - ./shared/data:/data
      - ./services/evidence/entrypoint.sh:/entrypoint.sh:ro
    environment:
      TZ: ${TIMEZONE:-America/New_York}
    entrypoint: ["/bin/bash", "/entrypoint.sh"]
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:3000 || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 5
      start_period: 60s
    networks:
      - ecosystem
